<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Theme Tree Map</title>
<script src="https://d3js.org/d3.v7.min.js"></script>
<style>
  body {
    font-family: Arial, sans-serif;
  }
  #container {
    width: 100%;
    height: 600px;
    border: 1px solid #ccc;
  }
</style>
</head>
<body>

<h2>Theme Tree Map Generator</h2>
<label for="themeInput">Enter a theme:</label>
<input type="text" id="themeInput" placeholder="e.g., Rock n' Roll" />
<button onclick="generateTree()">Generate</button>

<div id="container"></div>

<script>
const sampleData = {
  "Rock n' Roll": {
    name: "Rock n' Roll",
    children: [
      { name: "Jazz", children: [
        { name: "Blues" },
        { name: "Swing" }
      ]},
      { name: "Rock Variations", children: [
        { name: "Classic Rock" },
        { name: "Hard Rock" },
        { name: "Alternative" }
      ]}
    ]
  }
  // Add more themes and their related data here
};

function generateTree() {
  const theme = document.getElementById('themeInput').value.trim();
  const data = sampleData[theme] || { name: theme, children: [] };
  drawTree(data);
}

function drawTree(data) {
  d3.select("#container").html(""); // Clear previous tree
  const width = document.getElementById('container').clientWidth;
  const height = document.getElementById('container').clientHeight;

  const root = d3.hierarchy(data);

  const treeLayout = d3.tree().size([height, width - 160]);
  treeLayout(root);

  const svg = d3.select("#container").append("svg")
    .attr("width", width)
    .attr("height", height);

  // Links
  svg.selectAll('path.link')
    .data(root.links())
    .enter()
    .append('path')
    .attr('class', 'link')
    .attr('d', d3.linkHorizontal()
      .x(d => d.y)
      .y(d => d.x))
    .attr('fill', 'none')
    .attr('stroke', '#555');

  // Nodes
  const node = svg.selectAll('g.node')
    .data(root.descendants())
    .enter()
    .append('g')
    .attr('transform', d => `translate(${d.y},${d.x})`);

  node.append('circle')
    .attr('r', 5)
    .attr('fill', '#999');

  node.append('text')
    .attr('dy', 3)
    .attr('x', d => d.children ? -10 : 10)
    .style('text-anchor', d => d.children ? 'end' : 'start')
    .text(d => d.data.name);
}
</script>

</body>
</html>
